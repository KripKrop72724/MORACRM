{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="d-flex mb-3">
  <a href="{% url 'expense_add' %}" class="btn btn-primary me-auto">Add Expense</a>
  <form method="get" class="d-flex">
    <select name="category" class="form-select me-2">
      <option value="">All Categories</option>
      {% for key, val in expense_form.fields.category.choices %}
        <option value="{{ key }}"{% if key == category %} selected{% endif %}>{{ val }}</option>
      {% endfor %}
    </select>
    <button class="btn btn-outline-secondary" type="submit">Filter</button>
  </form>
</div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Date</th><th>Category</th><th>Description</th><th>Amount</th><th>Payment</th><th></th>
    </tr>
  </thead>
  <tbody>
    {% for exp in expenses %}
    <tr>
      <td>{{ exp.date }}</td>
      <td>{{ exp.get_category_display }}</td>
      <td>{{ exp.description }}</td>
      <td>{{ exp.amount }}</td>
      <td>{{ exp.get_payment_method_display }}</td>
      <td>
        <a href="{% url 'expense_edit' exp.pk %}" class="btn btn-sm btn-warning">Edit</a>
        <a href="{% url 'expense_delete' exp.pk %}" class="btn btn-sm btn-danger">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center">No expenses found.</td></tr>
    {% endfor %}
  </tbody>
</table>
<div class="alert alert-info">Total: {{ total }}</div>
{% endblock %}
